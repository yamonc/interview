# 面试题

## 1. [0909-小米 2022校招 java后端一面凉经（55min）](https://www.nowcoder.com/discuss/737620?channel=-1&source_id=profile_follow_post_nctrack)

### 索引的结构？为什么最左前缀原则就快了？原因是什么？

MySQL的默认引擎是InnoDB，InnoDB里面使用B+树作为索引的数据结构。跟B树不同的是，B+树的叶子节点保存关键字，而非叶子节点不保存关键字。在叶子节点里面同时保存了指向下一条数据的指针，方便范围顺序遍历和查找，。

最左前缀原则：最左优先，适用于多列索引的创建，根据业务的需求，将查询最频繁的一列放在最左侧。对于多列的索引，按照最左前缀原则，首先对第一列进行排序，在第一列排序的基础上对第二列排序，查找的话，可以根据排序后的索引快速找到对应关键字。（这块我也不太清楚。查查告诉我）。

### 为什么用B+树不用红黑树？用红黑树的时间复杂度为多少Olog(n)？

针对大数据量的数据存储的时候，红黑树的深度往往过大导致造成磁盘IO读写过于频繁，进而导致效率低下的情况。

或者这么说：红黑树常用于存储内存中的有序数据，增删很快，B+树常用于文件系统和数据库索引，因为B树的子节点大于红黑树，红黑树只能有2个子节点，B树子节点大于2，子节点树多这一特点保证了存储相同大小的数据，树的高度更小，数据局部更加紧凑，而硬盘读取有局部加载的优化（紧凑的好处：把要读取数据和周围的数据一起预先读取），B树相邻数据物理上更加紧凑这一特点符合硬盘进行io优化的特性。

> 原因：针对节点保存来说，红黑树一个节点只能保存一个数据，而B+树往往一个子节点可以包含多个数据，所以IO比较多。

引申：

*使用B+树不使用B树？*或者B树和B+树的特点/区别

B+和B树的特点是每层节点可以包括多个数据项，这样可以降低树的高度，树低了的话，可以减少磁盘IO次数。

但是B树的每个节点都有data域，这样的话，增大了节点的大小，也就相当于增加了磁盘的io次数，而B+树除了叶子节点之外，其他节点不存储数据，节点小，磁盘IO次数就少，另外B+树带有顺序访问指针，方便遍历区间遍历，而B树不支持这样的遍历操作。B+树的查询效率更加稳定：由于非叶子节点并不是最终指向文件内容的节点，而只是叶子节点中关键字的索引。所以任何关键字的查找必须走一条从根结点到叶子结点的路。所有关键字查询的路径长度相同，导致每一个数据的查询效率相当。而B树因为非叶子节点也存在数据Data域，有可能在非叶子节点中就可获取数据并返回。

### 事务的特性

ACID：原子性、一致性、隔离性和持久性。

原子性：事务要么执行，要不不执行，是最小的执行单元。

一致性：同一个事务在执行前后，数据保持一致，多个事务对同一数据读取的结果是相同的。

隔离性：并发访问数据库的时候，一个用户的事务不被其他事务所干扰，各并发事务之间数据之间数据独立。

持久性：一个事务提交之后，他对数据库中数据的改变是持久的，即使数据库发生故障也不会有影响。

